{"version":3,"sources":["api/ApiSlice.js","components/heroesListItem/HeroesListItem.js","components/spinner/Spinner.js","components/heroesList/HeroesList.js","hooks/http.hook.js","components/heroesFilters/filtersSlice.js","store/index.js","components/heroesAddForm/HeroesAddForm.js","components/heroesFilters/HeroesFilters.js","components/app/App.js","index.js"],"names":["apiSlice","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","tagTypes","endpoints","builder","getHeroes","query","providesTags","createHero","mutation","hero","url","method","body","invalidatesTags","deleteHero","id","concat","useGetHeroesQuery","useCreateHeroMutation","useDeleteHeroMutation","HeroesListItem","_ref","elementClassName","name","description","element","onDelete","_jsxs","className","children","_jsx","src","alt","style","objectFit","onClick","type","aria-label","Spinner","role","HeroesList","_useGetHeroesQuery","_useGetHeroesQuery$da","data","heroes","isLoading","isError","_useDeleteHeroMutatio","_slicedToArray","activeFilter","useSelector","state","filters","filteredHeroes","useMemo","slice","filter","item","useCallback","arr","elements","length","CSSTransition","timeout","classNames","map","props","_objectWithoutProperties","_objectSpread","TransitionGroup","component","useHttp","request","_asyncToGenerator","_regeneratorRuntime","mark","_callee","headers","response","_args","arguments","wrap","_context","prev","next","undefined","fetch","sent","ok","Error","status","json","abrupt","t0","stop","_x","apply","filtersAdapter","createEntityAdapter","initialState","getInitialState","filtersLoadingStatus","fetchFilters","createAsyncThunk","_useHttp","filtersSlice","createSlice","reducers","filtersChanged","action","payload","extraReducers","addCase","pending","fulfilled","setAll","rejected","addDefaultCase","actions","reducer","selectAll","getSelectors","filtersFetching","filtersFetched","filtersFetchingError","stringMiddleware","store","configureStore","_defineProperty","middleware","getDefaultMiddleware","devTools","process","HeroesAddForm","_useState","useState","_useState2","heroName","setHeroName","_useState3","_useState4","heroDescr","setHeroDescr","_useState5","_useState6","heroElement","setHeroElement","_useCreateHeroMutatio","_useCreateHeroMutatio2","getState","onSubmit","e","preventDefault","newHero","uuidv4","unwrap","htmlFor","required","placeholder","value","onChange","target","height","label","renderFilters","HeroesFilters","_useSelector","dispatch","useDispatch","useEffect","btnClass","active","App","ReactDOM","render","React","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.b7c2b3d3.chunk.js","sourcesContent":["import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\n\nexport const apiSlice = createApi({\n  reducerPath: \"api\",\n  baseQuery: fetchBaseQuery({ baseUrl: \"http://localhost:3001\" }),\n  tagTypes: [\"Heroes\"],\n  endpoints: (builder) => ({\n    getHeroes: builder.query({\n      query: () => \"/heroes\",\n      providesTags: [\"Heroes\"],\n    }),\n    createHero: builder.mutation({\n      query: (hero) => ({\n        url: \"/heroes\",\n        method: \"POST\",\n        body: hero,\n      }),\n      invalidatesTags: [\"Heroes\"],\n    }),\n    deleteHero: builder.mutation({\n      query: (id) => ({\n        url: `/heroes/${id}`,\n        method: \"DELETE\",\n      }),\n      invalidatesTags: [\"Heroes\"],\n    }),\n  }),\n});\n\nexport const {\n  useGetHeroesQuery,\n  useCreateHeroMutation,\n  useDeleteHeroMutation,\n} = apiSlice;\n","const HeroesListItem = ({ name, description, element, onDelete }) => {\n  let elementClassName;\n\n  switch (element) {\n    case \"fire\":\n      elementClassName = \"bg-danger bg-gradient\";\n      break;\n    case \"water\":\n      elementClassName = \"bg-primary bg-gradient\";\n      break;\n    case \"wind\":\n      elementClassName = \"bg-success bg-gradient\";\n      break;\n    case \"earth\":\n      elementClassName = \"bg-secondary bg-gradient\";\n      break;\n    default:\n      elementClassName = \"bg-warning bg-gradient\";\n  }\n\n  return (\n    <li\n      className={`card flex-row mb-4 shadow-lg text-white ${elementClassName}`}\n    >\n      <img\n        src=\"http://www.stpaulsteinbach.org/wp-content/uploads/2014/09/unknown-hero.jpg\"\n        className=\"img-fluid w-25 d-inline\"\n        alt=\"unknown hero\"\n        style={{ objectFit: \"cover\" }}\n      />\n      <div className=\"card-body\">\n        <h3 className=\"card-title\">{name}</h3>\n        <p className=\"card-text\">{description}</p>\n      </div>\n      <span\n        onClick={onDelete}\n        className=\"position-absolute top-0 start-100 translate-middle badge border rounded-pill bg-light\"\n      >\n        <button\n          type=\"button\"\n          className=\"btn-close btn-close\"\n          aria-label=\"Close\"\n        ></button>\n      </span>\n    </li>\n  );\n};\n\nexport default HeroesListItem;\n","\nconst Spinner = () => {\n    return (\n        <div className=\"spinner-border mx-auto mt-5\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n        </div>\n    )\n}\n\nexport default Spinner;","import { useCallback, useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { useGetHeroesQuery, useDeleteHeroMutation } from \"../../api/ApiSlice\";\nimport HeroesListItem from \"../heroesListItem/HeroesListItem\";\nimport Spinner from \"../spinner/Spinner\";\n\nimport \"./heroesList.scss\";\n\nconst HeroesList = () => {\n  const { data: heroes = [], isLoading, isError } = useGetHeroesQuery();\n\n  const [deleteHero] = useDeleteHeroMutation();\n\n  const activeFilter = useSelector((state) => state.filters.activeFilter);\n\n  const filteredHeroes = useMemo(() => {\n    const filteredHeroes = heroes.slice();\n\n    if (activeFilter === \"all\") {\n      return filteredHeroes;\n    } else {\n      return filteredHeroes.filter((item) => item.element === activeFilter);\n    }\n  }, [heroes, activeFilter]);\n\n  //   const dispatch = useDispatch();\n  //   const { request } = useHttp();\n\n  //   useEffect(() => {\n  //     dispatch(fetchHeroes());\n  //     // eslint-disable-next-line\n  //   }, []);\n\n  const onDelete = useCallback((id) => {\n    deleteHero(id);\n    //   request(`http://localhost:3001/heroes/${id}`, \"DELETE\")\n    //     .then((data) => console.log(data, \"Deleted\"))\n    //     .then(dispatch(heroDeleted(id)))\n    //     .catch((err) => console.log(err));\n    // eslint-disable-next-line\n  }, []);\n\n  if (isLoading) {\n    return <Spinner />;\n  } else if (isError) {\n    return <h5 className=\"text-center mt-5\">Ошибка загрузки</h5>;\n  }\n\n  const renderHeroesList = (arr) => {\n    if (arr.length === 0) {\n      return (\n        <CSSTransition timeout={0} classNames=\"hero\">\n          <h5 className=\"text-center mt-5\">Героев пока нет</h5>\n        </CSSTransition>\n      );\n    }\n\n    return arr.map(({ id, ...props }) => {\n      return (\n        <CSSTransition key={id} timeout={500} classNames=\"hero\">\n          <HeroesListItem {...props} onDelete={() => onDelete(id)} />\n        </CSSTransition>\n      );\n    });\n  };\n\n  const elements = renderHeroesList(filteredHeroes);\n  return <TransitionGroup component=\"ul\">{elements}</TransitionGroup>;\n};\n\nexport default HeroesList;\n","export const useHttp = () => {\n  const request = async (\n    url,\n    method = \"GET\",\n    body = null,\n    headers = { \"Content-Type\": \"application/json\" }\n  ) => {\n    try {\n      const response = await fetch(url, { method, body, headers });\n\n      if (!response.ok) {\n        throw new Error(`Could not fetch ${url}, status: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      return data;\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  return { request };\n};\n","import {\n  createSlice,\n  createAsyncThunk,\n  createEntityAdapter,\n} from \"@reduxjs/toolkit\";\nimport { useHttp } from \"../../hooks/http.hook\";\n\nconst filtersAdapter = createEntityAdapter();\n\nconst initialState = filtersAdapter.getInitialState({\n  filtersLoadingStatus: \"idle\",\n  activeFilter: \"all\",\n});\n\nexport const fetchFilters = createAsyncThunk(\n  \"filters/fetchFilters\",\n  async () => {\n    const { request } = useHttp();\n    return await request(\"http://localhost:3001/filters\");\n  }\n);\n\nconst filtersSlice = createSlice({\n  name: \"filters\",\n  initialState,\n  reducers: {\n    filtersChanged: (state, action) => {\n      state.activeFilter = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchFilters.pending, (state) => {\n        state.filtersLoadingStatus = \"loading\";\n      })\n      .addCase(fetchFilters.fulfilled, (state, action) => {\n        state.filtersLoadingStatus = \"idle\";\n        filtersAdapter.setAll(state, action.payload);\n      })\n      .addCase(fetchFilters.rejected, (state) => {\n        state.filtersLoadingStatus = \"error\";\n      })\n      .addDefaultCase(() => {});\n  },\n});\n\nconst { actions, reducer } = filtersSlice;\n\nexport default reducer;\n\nexport const { selectAll } = filtersAdapter.getSelectors(\n  (state) => state.filters\n);\n\nexport const {\n  filtersFetching,\n  filtersFetched,\n  filtersFetchingError,\n  filtersChanged,\n} = actions;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport filters from \"../components/heroesFilters/filtersSlice\";\nimport { apiSlice } from \"../api/ApiSlice\";\n\nconst stringMiddleware = () => (next) => (action) => {\n  if (typeof action === \"string\") {\n    return next({\n      type: action,\n    });\n  }\n  return next(action);\n};\n\n// const store = createStore(\n//   combineReducers({ heroes, filters }),\n//   compose(\n//     applyMiddleware(ReduxThunk, stringMiddleware),\n//     window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n//   )\n// );\n\nconst store = configureStore({\n  reducer: { filters, [apiSlice.reducerPath]: apiSlice.reducer },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(stringMiddleware, apiSlice.middleware),\n  devTools: process.env.NODE_ENV !== \"production\",\n});\nexport default store;\n","import { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport store from \"../../store\";\nimport { selectAll } from \"../heroesFilters/filtersSlice\";\nimport { useCreateHeroMutation } from \"../../api/ApiSlice\";\n\nconst HeroesAddForm = () => {\n  const [heroName, setHeroName] = useState(\"\");\n  const [heroDescr, setHeroDescr] = useState(\"\");\n  const [heroElement, setHeroElement] = useState(\"\");\n\n  const [createHero, { isLoading }] = useCreateHeroMutation();\n\n  const { filtersLoadingStatus } = useSelector((state) => state.filters);\n  const filters = selectAll(store.getState());\n  // const dispatch = useDispatch();\n  // const { request } = useHttp();\n\n  const onSubmitHandler = (e) => {\n    e.preventDefault();\n    const newHero = {\n      id: uuidv4(),\n      name: heroName,\n      description: heroDescr,\n      element: heroElement,\n    };\n\n    createHero(newHero).unwrap();\n    // request(\"http://localhost:3001/heroes\", \"POST\", JSON.stringify(newHero))\n    //   .then((res) => console.log(res, \"Отправка успешна\"))\n    //   .then(dispatch(heroCreated(newHero)))\n    //   .catch((err) => console.log(err));\n\n    setHeroName(\"\");\n    setHeroDescr(\"\");\n    setHeroElement(\"\");\n  };\n\n  const renderFilters = (filters, status) => {\n    if (status === \"loading\") {\n      return <option>Загрузка элементов</option>;\n    } else if (status === \"error\") {\n      return <option>Ошибка загрузки</option>;\n    }\n\n    if (filters && filters.length > 0) {\n      return filters.map(({ name, label }) => {\n        // eslint-disable-next-line\n        if (name === \"all\") return;\n\n        return (\n          <option key={name} value={name}>\n            {label}\n          </option>\n        );\n      });\n    }\n  };\n\n  return (\n    <form className=\"border p-4 shadow-lg rounded\" onSubmit={onSubmitHandler}>\n      <div className=\"mb-3\">\n        <label htmlFor=\"name\" className=\"form-label fs-4\">\n          Имя нового героя\n        </label>\n        <input\n          required\n          type=\"text\"\n          name=\"name\"\n          className=\"form-control\"\n          id=\"name\"\n          placeholder=\"Как меня зовут?\"\n          value={heroName}\n          onChange={(e) => setHeroName(e.target.value)}\n        />\n      </div>\n\n      <div className=\"mb-3\">\n        <label htmlFor=\"text\" className=\"form-label fs-4\">\n          Описание\n        </label>\n        <textarea\n          required\n          name=\"text\"\n          className=\"form-control\"\n          id=\"text\"\n          placeholder=\"Что я умею?\"\n          style={{ height: \"130px\" }}\n          value={heroDescr}\n          onChange={(e) => setHeroDescr(e.target.value)}\n        />\n      </div>\n\n      <div className=\"mb-3\">\n        <label htmlFor=\"element\" className=\"form-label\">\n          Выбрать элемент героя\n        </label>\n        <select\n          required\n          className=\"form-select\"\n          id=\"element\"\n          name=\"element\"\n          value={heroElement}\n          onChange={(e) => setHeroElement(e.target.value)}\n        >\n          <option value=\"\">Я владею элементом...</option>\n          {renderFilters(filters, filtersLoadingStatus)}\n        </select>\n      </div>\n\n      <button type=\"submit\" className=\"btn btn-primary\">\n        Создать\n      </button>\n    </form>\n  );\n};\n\nexport default HeroesAddForm;\n","import { useHttp } from \"../../hooks/http.hook\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport classNames from \"classnames\";\nimport store from \"../../store\";\n\nimport { filtersChanged, fetchFilters, selectAll } from \"./filtersSlice\";\nimport Spinner from \"../spinner/Spinner\";\n\nconst HeroesFilters = () => {\n  const { filtersLoadingStatus, activeFilter } = useSelector(\n    (state) => state.filters\n  );\n  const filters = selectAll(store.getState());\n  const dispatch = useDispatch();\n  const { request } = useHttp();\n\n  useEffect(() => {\n    dispatch(fetchFilters(request));\n\n    // eslint-disable-next-line\n  }, []);\n\n  if (filtersLoadingStatus === \"loading\") {\n    return <Spinner />;\n  } else if (filtersLoadingStatus === \"error\") {\n    return <h5 className=\"text-center mt-5\">Ошибка загрузки</h5>;\n  }\n\n  const renderFilters = (arr) => {\n    if (arr.length === 0) {\n      return <h5 className=\"text-center mt-5\">Фильтры не найдены</h5>;\n    }\n\n    return arr.map(({ name, className, label }) => {\n      const btnClass = classNames(\"btn\", className, {\n        active: name === activeFilter,\n      });\n\n      return (\n        <button\n          key={name}\n          id={name}\n          className={btnClass}\n          onClick={() => dispatch(filtersChanged(name))}\n        >\n          {label}\n        </button>\n      );\n    });\n  };\n\n  const elements = renderFilters(filters);\n\n  return (\n    <div className=\"card shadow-lg mt-4\">\n      <div className=\"card-body\">\n        <p className=\"card-text\">Отфильтруйте героев по элементам</p>\n        <div className=\"btn-group\">{elements}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default HeroesFilters;\n","import HeroesList from '../heroesList/HeroesList';\nimport HeroesAddForm from '../heroesAddForm/HeroesAddForm';\nimport HeroesFilters from '../heroesFilters/HeroesFilters';\n\nimport './app.scss';\n\nconst App = () => {\n    \n    return (\n        <main className=\"app\">\n            <div className=\"content\">\n                <HeroesList/>\n                <div className=\"content__interactive\">\n                    <HeroesAddForm/>\n                    <HeroesFilters/>\n                </div>\n            </div>\n        </main>\n    )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './components/app/App';\nimport store from './store';\n\nimport './styles/index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}